<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>PiSproDB</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" type="text/css" href="mainPage.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>


    </head>
    <body style="background-color:#37474f ;">

    <body class="main">
        <nav class="navbar navbar-inverse">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>                        
                    </button>
                    <a class="navbar-brand" href="#">PiSproDB</a>
                </div>
                <div class="collapse navbar-collapse" id="myNavbar">
                    <ul class="nav navbar-nav">
                        <li class="active"><a href="index.html">Home</a></li>
                        <li><a href="brew.html">Brew</a></li>
                        <li><a href="ReplayShot.html">Replay Shot</a></li>
                        <li><a href="databaseTables.html">DB Tables</a></li>
                    </ul>

                </div>
            </div>
        </nav>

        <div>
            <img class="container-fluid" src= "http://pidataspro.ddns.net:8057?action=stream" width="640" height="480"/>
       
        
        
        
        
                <!--- Gauges ----->
        <script type="text/javascript">
            google.charts.load('current', {'packages':['gauge']});
            google.charts.setOnLoadCallback(drawChart);


            function drawChart() {
                setInterval(function() {
                    $.getJSON(("http://pidataspro.ddns.net:8056/getLastNormal"), function(results){
                        var ambientTemp = [], boilerTemp=[],ambientHumidity=[];
                        var all = [];
                        $.each(results, function(i, field){
                            ambientTemp.push(field.ambientTemp);
                            boilerTemp.push(field.boilerTemp);
                            ambientHumidity.push(field.ambientHumidity);
                        });
                        //Returns all of the values
                        all = [boilerTemp[0],ambientTemp[0],ambientHumidity[0]]; 

                        var dataBoilerTemp = google.visualization.arrayToDataTable([
                            ['Label', 'Value'],
                            ['Boiler Temp', all[0]]
                        ]);

                        var dataAmbientTemp = google.visualization.arrayToDataTable([
                            ['Label', 'Value'],
                            ['Room Temp', all[1]]
                        ]);

                        var dataHumidity = google.visualization.arrayToDataTable([
                            ['Label', 'Value'],
                            ['Humidity', all[2]]
                        ]);

                        var boilerTempOptions = {
                            width: 700, height: 300,
                            redFrom: 250, redTo: 300,
                            yellowFrom: 150, yellowTo: 250,
                            minorTicks: 10, max: 300
                        };

                        var ambientTempOptions = {
                            width: 700, height: 300,
                            redFrom: 90, redTo: 120,
                            yellowFrom:60, yellowTo: 90,
                            minorTicks: 5, max: 120
                        };

                        var humidityOptions = {
                            width: 700, height: 300,
                            redFrom: 14, redTo: 20,
                            yellowFrom: 8, yellowTo: 14,
                            minorTicks: 1, max: 20
                        };

                        var chartBoilerTemp = new google.visualization.Gauge(document.getElementById('chartBoilerTemp'));
                        var chartAmbientTemp = new google.visualization.Gauge(document.getElementById('chartAmbientTemp'));
                        var chartHumidity = new google.visualization.Gauge(document.getElementById('chartHumidity'));

                        chartBoilerTemp.draw(dataBoilerTemp, boilerTempOptions);
                        chartAmbientTemp.draw(dataAmbientTemp,ambientTempOptions);
                        chartHumidity.draw(dataHumidity,humidityOptions);

                        dataBoilerTemp.setValue(0, 1, boilerTemp[0]);
                        chartBoilerTemp.draw(dataBoilerTemp, boilerTempOptions);
                        
                        dataAmbientTemp.setValue(1, 1, ambientTemp[0]);
                        chartAmbientTemp.draw(dataAmbientTemp, ambientTempOptions);
                        
                        dataHumidity.setValue(2, 1, ambientHumidity[0]);
                        chartHumidity.draw(dataHumidity, humidityOptions);

                    });
                }, 1000);
            }
        </script>
        
        
         </div>
        <div class="btn" container-fluid>
            <button type="button" class="btn btn-primary" id="on">Turn On Machine</button>
            <button type="button" class="btn btn-primary" id="off">Turn Off Machine</button>
            <button type="button" class="btn btn-primary" id="brew">Pull Shot</button>
        </div>
        <script>
            $(document).ready(function(){           
                $("#on").click(function(e){
                    e.preventDefault();
                    $.ajax({
                        type: "GET", url: "on"});
                });
                $("#off").click(function(e){
                    e.preventDefault();
                    $.ajax({
                        type: "GET", url: "off"});
                });
                $("#brew").click(function(e){
                    e.preventDefault();
                    $.ajax({
                        type: "GET", url: "brew"});
                });
            });

        </script>

        <br>
        <br>
        <div class="projinf container-fluid">
            <heading class="pTitle"><u><b>PiSproDB Espresso Machine and Logging:</b></u></heading>
            <p class="pGraph">In this project we aimed to explore what was possible when it comes to creating the perfect shot of espresso. We created a monitor and logging system for Peter's Arduino/RaspberryPi based espresso machine. 
                Data Collected:
            <ul>
                <li> Espresso Shot Pressure </li>
                <li> Espresso Shot Time</li>
                <li> Boiler Temperature</li>
                <li> Ambient Temperature</li>
                <li> Ambient Humidity</li>
            </ul>
            <p/>

        </div>
        <div class="gitDiv container-fluid"><heading class="gitHeading"><b><u>GitHub Links:</u></b><br>
            <a href="https://github.com/pshutt/RaspberryEspresso"><font color="white">RaspberryEspresso</font></a><br>
            <a href="https://github.com/RKHamilton95/EspressoMonitor"><font color="white">EspressoMonitor</font></a>
            </heading>
        </div>

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
        <script>


        </script>
        </body>
        <html/>



